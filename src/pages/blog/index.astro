---
import { getCollection } from 'astro:content';
import Layout from '../../layouts/Layout.astro';
import BlogHero from '../../components/blog/BlogHero.astro';
import PostCard from '../../components/blog/PostCard.astro';

const posts = (await getCollection('blog')).sort(
  (a, b) => +new Date(b.data.pubDate) - +new Date(a.data.pubDate),
);
---

<Layout
  title="BastCo Insights & Research"
  description="Research, playbooks, and stories from the BastCo cybersecurity and software response team."
>
  <BlogHero />

  {posts.length > 0 ? (
    <section class="bs-container flex flex-col gap-12 py-20 pb-36 lg:py-28 min-h-[75vh]">
      <div class="grid gap-10 md:grid-cols-2 xl:grid-cols-3">
        {posts.map((post) => (
          <PostCard post={post} />
        ))}
      </div>
    </section>
  ) : (
    <section class="bs-container py-24 text-center text-bs-foreground-dark">
      <p class="text-lg">
        We are preparing our first set of stories. Check back soon or contact us at{' '}
        <a class="text-bs-secondary hover:text-bs-foreground-light" href="mailto:insights@bastco.com">
          insights@bastco.com
        </a>{' '}
        to request topics.
      </p>
    </section>
  )}
</Layout>
